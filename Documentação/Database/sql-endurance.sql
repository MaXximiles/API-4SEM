------------------------------------------
-- USUARIOS
------------------------------------------
CREATE TABLE USUARIOS (
  USR_ID NUMBER(38, 0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  USR_NOME VARCHAR2(25) NOT NULL,
  USR_SOBRENOME VARCHAR2(100) NOT NULL,
  USR_CPF VARCHAR2(11) NOT NULL,
  USR_EMAIL VARCHAR2(255) NOT NULL,
  USR_SENHA VARCHAR2(255) NOT NULL,
  USR_IMAGEM VARCHAR2(255),
  USR_VACINA VARCHAR2(255),
  USR_ULTIMO_ACESSO TIMESTAMP,
  USR_ULTIMO_ACESSO_DISPLAY TIMESTAMP,
  USR_DATA_CADASTRO TIMESTAMP,
  USR_TIPO VARCHAR2(25) NOT NULL,
  USR_AUTORIDADES RAW,
  USR_ATIVO NUMBER(1),
  USR_NAO_BLOQUEADO NUMBER(1),
  CONSTRAINT PK_USUARIOS PRIMARY KEY (USR_ID)
);

ALTER TABLE USUARIOS ADD CONSTRAINT UC_USUARIOS_USR_CPF UNIQUE (USR_CPF);

ALTER TABLE USUARIOS ADD CONSTRAINT UC_USUARIOS_USR_EMAIL UNIQUE (USR_EMAIL);

CREATE SEQUENCE  USER_SEQUENCE  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL;


------------------------------------------
-- EVENTOS
------------------------------------------
CREATE TABLE EVENTOS (
  EVT_ID NUMBER(38, 0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  EVT_INICIO TIMESTAMP NOT NULL,
  EVT_FIM TIMESTAMP NOT NULL,
  EVT_LOCAL VARCHAR2(9) NOT NULL,
  EVT_TEMA VARCHAR2(50) NOT NULL,
  EVT_DESC VARCHAR2(150),
  EVT_OBS VARCHAR2(150),
  EVT_USR_ID NUMBER(38, 0) NOT NULL,
  EVT_CRIACAO TIMESTAMP NOT NULL,
  EVT_STATUS VARCHAR2(10) NOT NULL,
  EVT_MAX_PART INTEGER NOT NULL,
  EVT_TOTAL_PART INTEGER NOT NULL,
  CONSTRAINT PK_EVENTOS PRIMARY KEY (EVT_ID)
);

ALTER TABLE EVENTOS ADD CONSTRAINT UC_EVENTOS_EVT_TEMA UNIQUE (EVT_TEMA);

ALTER TABLE EVENTOS ADD CONSTRAINT FK_EVENTOS_ON_EVT_USR FOREIGN KEY (EVT_USR_ID) REFERENCES USUARIOS (USR_ID);

CREATE SEQUENCE  EVENTOS_SEQUENCE  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;

------------------------------------------
-- EVENTOS+USUARIOS
------------------------------------------

CREATE TABLE EVENTO_USUARIO_PART (	
	EUP_EVT_ID NUMBER(19,0) NOT NULL, 
	EUP_USR_ID NUMBER(19,0) NOT NULL
   );

ALTER TABLE EVENTO_USUARIO_PART ADD CONSTRAINT FK_EVENTO_USUARIO_PART_USR_ID FOREIGN KEY (EUP_USR_ID)
	  REFERENCES USUARIOS (USR_ID);

ALTER TABLE EVENTO_USUARIO_PART ADD CONSTRAINT FK_EVENTO_USUARIO_PART_EVT_ID FOREIGN KEY (EUP_EVT_ID)
	  REFERENCES EVENTOS (EVT_ID);


------------------------------------------
-- FORNECEDORES
------------------------------------------
CREATE TABLE FORNECEDORES (
  FRN_ID NUMBER(38, 0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  FRN_DESCRICAO VARCHAR2(25) NOT NULL,
  FRN_CNPJ VARCHAR2(14) NOT NULL,
  FRN_EMAIL VARCHAR2(100) NOT NULL,
  FRN_OBS VARCHAR2(255),
  CONSTRAINT PK_FORNECEDORES PRIMARY KEY (FRN_ID)
);

ALTER TABLE FORNECEDORES ADD CONSTRAINT UC_FORNECEDORES_FRN_CNPJ UNIQUE (FRN_CNPJ);

ALTER TABLE FORNECEDORES ADD CONSTRAINT UC_FORNECEDORES_FRN_DESCRICAO UNIQUE (FRN_DESCRICAO);

ALTER TABLE FORNECEDORES ADD CONSTRAINT UC_FORNECEDORES_FRN_EMAIL UNIQUE (FRN_EMAIL);

CREATE SEQUENCE  FORNECEDORES_SEQUENCE  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;


------------------------------------------
-- EVENTOS+FORNECEDORES
------------------------------------------

CREATE TABLE EVENTO_FORNECEDOR_MAP (	
	EFM_EVT_ID NUMBER(19,0) NOT NULL, 
	EFM_FRN_ID NUMBER(19,0) NOT NULL
   );

ALTER TABLE EVENTO_FORNECEDOR_MAP ADD CONSTRAINT FK_EVENTO_FORNECEDOR_MAP_FRN_ID FOREIGN KEY (EFM_FRN_ID)
	  REFERENCES FORNECEDORES (RN_ID);

ALTER TABLE EVENTO_FORNECEDOR_MAP ADD CONSTRAINT FK_EVENTO_FORNECEDOR_MAP_EVT_ID FOREIGN KEY (EFM_EVT_ID)
	  REFERENCES EVENTOS (EVT_ID);
